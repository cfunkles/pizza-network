<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script
        src="http://code.jquery.com/jquery-3.2.1.js"
        integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE="
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="./index.css">
    <title>*Login/Registration*</title>
</head>
<body>
    <div class="container login-form">
		<div class="row"style="margin: 60px">
			<div class="col-sm-4 col-sm-offset-4">
				<div id="login-error"></div>
				<input type="text" id="username">
				<input type="password" id="password">
				<button class="btn btn-primary" id="login">Login</button>
				<button class="btn btn-warning" id="register">Register</button>
			</div>
		</div>
        <!--more design for this later-->
        <div class="container row login-info">
            <div class="col-sm-4 col-sm-offset-4">
                <p>Login to see pizza places now üçï</p>
                <p>Is this your first time here? Type in your username and password and hit register to start pizzazzzing ü§†!!!</p>
            </div>
        </div>
	</div>
    <div class="container info">
        <div class="row">
            <div class="container">
                <p class="col-sm-6 col-sm-offset-3">Pizza network is a site for people who love pizza! Members can add new pizza places, vote for their favorite spot, find your style of pizza, and talk with other humans about pizza. Enjoy you're Pizzazzzing!!!</p>
            </div>
        </div>
        <footer>
            <p style="color: lightgrey; text-align: center">The Pizza Network &copy; Casey, Chuck, David</p>
        </footer>
    </div>

    <script>
        $('#login').click(function() {
            $.post('/api/login', {
                username: $('#username').val(),
                password: $('#password').val()
            }, function(res) {
                console.log(res);
                if (res === "error") {
                    $('#login-error').text('Error: Username or password incorrect or you need to register first');
                } else {
                    console.log(res);
                    $('#username').val('');
                    $("#password").val('');
                    window.location.href = "home.html";
                } 
            });
        });

         $('#register').click(function() {
            $.post('/api/register', {
                username: $('#username').val(),
                password: $('#password').val()
            }, function(res) {
                if (res === "exists") {
                    $('#login-error').text('Error: the username ' + $('#username').val() + ' already exist.');
                } else {
                    $('#login-error').text('Registered! Try logging in...');
                } 
            });
        });
    </script>
</body>
</html>